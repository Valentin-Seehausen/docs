import { useMDXComponents } from '@mdx-js/react'
import { MDXRemote } from 'next-mdx-remote'
import { serialize } from 'next-mdx-remote/serialize'
import { useSSG } from '../../components/SSG'

export async function mdxGetStaticProps() {
  const response = await fetch('https://raw.githubusercontent.com/shuding/nextra/main/README.md')
  const markdown = await response.text()
  const mdxSource = await serialize(markdown)
  return {
    props: {
      ssg: mdxSource.compiledSource
    }
  }
}

export function Page() {
  const components = useMDXComponents()
  const compiledSource = useSSG()
  return <MDXRemote compiledSource={compiledSource} components={components} />
}

<Page/>
